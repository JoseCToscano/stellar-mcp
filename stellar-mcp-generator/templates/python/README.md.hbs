# {{contract_name}} MCP Server

MCP server for interacting with the **{{contract_name}}** Soroban contract.

- **Contract ID**: `{{contract_id}}`
- **Network**: {{network_name}}
- **RPC URL**: {{rpc_url}}

## Prerequisites

- Python 3.10 or higher
- `uv` (recommended) or `pip` for package management
- `stellar-contract-bindings` CLI tool

### Install stellar-contract-bindings

```bash
pip install stellar-contract-bindings
```

## Installation

### Using uv (recommended)

```bash
# Install dependencies
uv sync

# Or install with pip
uv pip install -e .
```

### Using pip

```bash
pip install -e .
```

## Generate Contract Bindings

Before running the server, generate the Python bindings for the contract:

```bash
stellar-contract-bindings python \
  --contract-id {{contract_id}} \
  --rpc-url {{rpc_url}} \
  --output ./src/bindings
```

This will create `src/bindings/bindings.py` with the contract client code.

## Configuration

Create a `.env` file from the example:

```bash
cp .env.example .env
```

Edit `.env` to configure:

```env
CONTRACT_ID={{contract_id}}
RPC_URL={{rpc_url}}
NETWORK_PASSPHRASE={{network_passphrase}}
```

## Running the Server

### For Claude Desktop

Install the server with Claude Desktop:

```bash
uv run mcp install server.py
```

Or manually add to your Claude Desktop config (`~/Library/Application Support/Claude/claude_desktop_config.json`):

```json
{
  "mcpServers": {
    "{{server_name}}": {
      "command": "uv",
      "args": [
        "--directory",
        "/absolute/path/to/{{contract_name}}-mcp-server",
        "run",
        "server.py"
      ]
    }
  }
}
```

### For Development

```bash
# Run with uv
uv run server.py

# Or with mcp dev tool
uv run mcp dev server.py
```

## Available Tools

{{#each functions}}
### `{{name_snake}}`

{{doc}}

**Parameters:**
{{#if inputs}}
{{#each inputs}}
- `{{name_snake}}` ({{py_type}}): {{#if doc}}{{doc}}{{else}}Contract parameter{{/if}}
{{/each}}
{{else}}
None
{{/if}}

**Returns:**
- `xdr` (str): Transaction XDR ready for signing
- `simulationResult` (Any): Result from contract simulation

---

{{/each}}

## Project Structure

```
.
├── server.py              # MCP server entry point
├── src/
│   ├── __init__.py
│   ├── contract_client.py # Contract client wrapper
│   └── bindings/          # Generated by stellar-contract-bindings
│       └── bindings.py
├── pyproject.toml         # Python project configuration
├── .env.example           # Environment template
└── README.md
```

## Development

### Run Tests

```bash
uv run pytest
```

### Type Checking

```bash
uv run mypy src/
```

## Troubleshooting

### "Contract bindings not yet generated"

Make sure you've run the `stellar-contract-bindings` command to generate `src/bindings/bindings.py`.

### Permission Errors

Ensure the server.py file has execute permissions:

```bash
chmod +x server.py
```

## Resources

- [Model Context Protocol Python SDK](https://github.com/modelcontextprotocol/python-sdk)
- [Stellar Contract Bindings](https://github.com/lightsail-network/stellar-contract-bindings)
- [Stellar Python SDK](https://stellar-sdk.readthedocs.io/)

---

Generated by stellar-mcp-generator v{{version}}
